## A. ШРИ: Асинхронность

```
Ограничение времени: 1 секунда
Ограничение памяти: 256Mb
Ввод: input.js
Вывод: output.json
```

Где-то в параллельной вселенной всё асинхронное, даже массивы...

Внутри асинхронного массива может храниться либо число, либо другой асинхронный массив, а взаимодействие происходит через два метода:

```typescript
type Elem = AsyncArray | number;

type AsyncArray = {  
  // получить элемент по индексу  
  read(index: number, callback: (elem: Elem) => void): void;

  // Получить количество элементов в массиве  
  size(callback: (size: number) => void): void;  
}
```

Напишите функцию, которая сделает из вложенного асинхронного массива простой плоский массив и сохранит порядок элементов

Надо учесть, что, иногда, методы срабатывают с ошибкой и вместо результата возвращают `null`

Кроме того, операции асинхронные и занимают какое-то время, поэтому надо придумать что-то более оптимальное, чем последовательно читать каждый следующий элемент в массиве...

### Формат ввода

Объект AsyncArray:

```javascript
AsyncArray([  
    8,  
    AsyncArray([  
        15,  
        16,  
    ]),  
    AsyncArray([  
        AsyncArray([  
            AsyncArray([  
                42,  
                AsyncArray([  
                    AsyncArray([]),  
                    23,  
                ]),  
            ]),  
        ]),  
        4,  
    ]),
])
```

### Формат вывода

Массив чисел:
```javascript
[8, 15, 16, 42, 23, 4]
```

### Примечания
Задачу требуется решить на JavaScript (ES2017) и оформить решение по шаблону:

```javascript
module.exports = async function (input) {  
  // основная функция

  return answer;  
}

// вспомогательные функции
```

Если после нескольких посылок вердикт по решению — `IL`, скорее всего, решение работает слишком медленно. Вы же помните, что не все `await` одинаково полезны?

Песочницу для решения можно загрузить по [ссылке](https://contest.yandex.ru/contest/39094/download/A/).